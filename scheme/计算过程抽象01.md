# 构造抽象过程

[TOC]

将过程表示为数据进行处理

## 程序设计的基本元素

程序语言的机制：
- 基本表达式：语言的最基本个体
- 组合的方法：由基本个体组合构造出的复杂元素
- 抽象的方法：对复杂元素进行命名，作为基础操作单元

程序设计内容：
- 数据：被操作的东西
- 过程：操作数据的规则描述

### 表达式

```
486

(+ 137 349) 由一对括号组成的称为组合式。

(+ (* 3
      (+ (* 2 4)
         (+ 3 5)))
   (+ (- 10 7)
      6))
```

前缀表达式：
- 适用于带有任意个实参的过程：`(+ 10 21 233 4)`
- 允许嵌套，即元素的本事又是组合式：`(+ (- 20 10) (+ 1 4))`

### 命名和环境

- define:抽象方法 创建起（名字-对象）的关联 -> 逐步递增地开发程序 -> 由许多相对简单的过程组成一个程序
```
(define pi 3.1415)
(define redius 10)
(define circumference (* 2 pi redius))
circumference  //62.
```

- 环境：维护（名字-对象）的关联 的存储能力

### 组合式的求值

```
(* (+ 2 (* 4 6))
   (+ 3 5 7))
```

解释器求值过程：
1. 对组合式下的各个子表达式求值
2. 求得的值作为参数应用于上层表达式

这样的求值过程是递归的。

对这过程的反复利用，总可以到达基本表达式的求解。
环境的作用就是确定符号的意义：即`（+ x 1）`中 + 的意义。

### 复合过程

过程定义：为复合操作提供名字，从而使之成为一个基本操作单元

`(define (square x) (* x x))`

如上创建了一个对数值求平方的复合过程，
`(square 4)  // 16`

### 应用序和正则序

正则序：先完全展开，再求值。（会产生重复求值的情况，某些情况下可能会很复杂，也可能是很有价值的工具）
应用序：先求值参数，在应用。

### 条件表达式

```取绝对值的方法
(define (abs x)
    (cond ((> x 0) x)
          ((= x 0) 0)  
          ((< x 0) (- x))
    )
)

(define (abs x)
    (cond ((> x 0) x)
          (else (- x))  
    )
)

(define (abs x)
    (if (< x 0)
        (- x)
        x
    )
)
定义谓词
(define (>= x y)
    (or (> x y) (= x y))
)
```

### 过程作为黑箱

见 practice01.scm中求解平方根

反应出从原始问题分解到各个子问题的求解。

#### 局部变量

## 过程与过程产生的计算（迭代与递归）

对阶乘的计算方式：
1. 从n开始计算 n*(n-1)*....1
2. 从1开始计算 1*2*3......n

第一种方式过程：先展开（增长），保持好操作的轨迹，再计算（收缩）。被称为递归计算过程。
第二种方式过程：没有增长收缩的过程。被称为迭代计算过程。

迭代计算：
- 其状态可以用固定数目的状态变量描述
- 存在一套固定的存取规则用于描述上一状态到下一状态的变量更新方式
- 存在一个结束检查，用于程序终止检查

### 树形递归

